<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>å¹¾Aå¹¾BéŠæˆ²</title>
<link rel="stylesheet" href="1a2b_style.css">
</head>
<body>
<div class="container">
    <h1>å¹¾Aå¹¾BéŠæˆ²</h1>
    <p id="message" style="text-align:center; font-weight:bold;">éŠæˆ²é–‹å§‹ï¼Œè«‹è¼¸å…¥æ•¸å­—ï¼</p>
    <form id="gameForm">
        <input type="text" id="guessInput" maxlength="4" placeholder="è¼¸å…¥ 4 ä½ä¸é‡è¤‡æ•¸å­—" required>
        <div class="btns">
            <button type="submit" id="submitBtn">é€å‡º</button>
            <button type="button" id="resetBtn">é‡æ–°é–‹å§‹</button>
        </div>
    </form>

    <h2>æ­·å²ç´€éŒ„</h2>
    <ul id="history"></ul>
</div>

<script>
// éŠæˆ²é‚è¼¯
let answer = generateAnswer();
let history = [];

const form = document.getElementById('gameForm');
const messageEl = document.getElementById('message');
const historyEl = document.getElementById('history');
const guessInput = document.getElementById('guessInput');
const resetBtn = document.getElementById('resetBtn');

function generateAnswer() {
    let digits = [];
    while(digits.length < 4){
        let d = Math.floor(Math.random()*10);
        if(!digits.includes(d)) digits.push(d);
    }
    return digits.join('');
}

function checkGuess(guess, answer){
    let A=0,B=0;
    for(let i=0;i<4;i++){
        if(guess[i] === answer[i]) A++;
        else if(answer.includes(guess[i])) B++;
    }
    return `${A}A${B}B`;
}

function updateHistory(){
    historyEl.innerHTML = '';
    history.slice().reverse().forEach(item => {
        const li = document.createElement('li');
        li.textContent = item;
        historyEl.appendChild(li);
    });
}

form.addEventListener('submit', function(e){
    e.preventDefault();
    const guess = guessInput.value.trim();
    if(!/^\d{4}$/.test(guess)){
        alert("è«‹è¼¸å…¥ 4 ä½æ•¸å­—ï¼");
        return;
    }
    if(new Set(guess).size !== 4){
        alert("æ•¸å­—ä¸èƒ½é‡è¤‡ï¼");
        return;
    }
    const result = checkGuess(guess, answer);
    history.push(`${guess} â†’ ${result}`);
    updateHistory();
    messageEl.textContent = (result === "4A0B") ? `ğŸ‰ æ­å–œç­”å°ï¼ç­”æ¡ˆæ˜¯ ${answer}` : result;
    guessInput.value = '';
});

resetBtn.addEventListener('click', function(){
    answer = generateAnswer();
    history = [];
    messageEl.textContent = "æ–°éŠæˆ²é–‹å§‹ï¼Œè«‹è¼¸å…¥æ•¸å­—ï¼";
    updateHistory();
    guessInput.value = '';
});
</script>
</body>
</html>
